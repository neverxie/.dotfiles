"=========================================================================
" File		 : .vimrc
" Change Logs:
" Date			Author		Notes
" 2019-04-10	never		the first version
"=========================================================================

"-------------------------------------------------------------------------
" This line should not be removed as it ensures that various options are
" properly set to work with the Vim-related packages available in Debian.
"-------------------------------------------------------------------------
runtime! debian.vim

"-------------------------------------------------------------------------
" Vim5 and later versions support syntax highlighting. Uncommenting the next
" line enables syntax highlighting by default.
"-------------------------------------------------------------------------
if has("syntax")
	syntax on
endif

"-------------------------------------------------------------------------
" generation
"-------------------------------------------------------------------------
set number
set nowritebackup
set nobackup
set incsearch
set hlsearch

set tabstop=4
set softtabstop=4
set shiftwidth=4
set cindent

set guioptions-=T
set pumheight=4
set completeopt-=preview
set tags=tags;/
filetype indent on

nmap <F8> :noh<CR>

"-------------------------------------------------------------------------
" 文件编码
"-------------------------------------------------------------------------
set fileencodings=UTF-8,cp936
let loaded_matchparen = 1
au BufNewFile,BufRead *.c,*.cpp,*.h,*.S,*.s set expandtab

"-------------------------------------------------------------------------
" 主题
"-------------------------------------------------------------------------
colorscheme peachpuff

"-------------------------------------------------------------------------
" 搜索高亮
"-------------------------------------------------------------------------
highlight Search ctermfg=black

"-------------------------------------------------------------------------
" 第81列非空字符设置高亮
"-------------------------------------------------------------------------
highlight ColorColumn ctermfg=cyan guifg=cyan ctermbg=None guibg=bg
call matchadd('ColorColumn', '\%81v', 100)

"-------------------------------------------------------------------------
" 行号颜色
"-------------------------------------------------------------------------
highlight linenr ctermfg=darkmagenta guifg=fg
"highlight linenr ctermfg=darkgray
"highlight linenr ctermfg=gray
"highlight linenr ctermfg=lightgray
"highlight linenr ctermfg=brown

"-------------------------------------------------------------------------
" 分割线样式
"-------------------------------------------------------------------------
"highlight VertSplit ctermfg=gray ctermbg=none term=none cterm=none gui=none
" guibg无法设置none
highlight VertSplit ctermfg=gray guifg=gray guibg=bg ctermbg=none gui=none

"-------------------------------------------------------------------------
" 状态行
"-------------------------------------------------------------------------
hi StatusLine ctermfg=red guifg=red guibg=bg ctermbg=none term=none cterm=none gui=none
hi StatusLineNC ctermfg=gray guifg=gray guibg=bg ctermbg=none term=none cterm=none gui=none
set statusline=
set statusline+=\ %<%f
set statusline+=\ \|\ ascii:%b
set statusline+=\ \|\ hex:0x%02.2B
set statusline+=\ %=\ %{''.(&ff).''}
set statusline+=\ \|\ %{&enc}
set statusline+=\ \|\ %Y
set statusline+=\ \|\ %=%l/%L\ %c
set statusline+=\ \|\ %M%R%W\ %P
set laststatus=2

"-------------------------------------------------------------------------
" 字体
"-------------------------------------------------------------------------
if has('gui_running')
	set guifont=FiraCode\ 7
endif

"-------------------------------------------------------------------------
" vim插件
"-------------------------------------------------------------------------
call plug#begin('~/.vim/plugged')
" 行尾空白字符高亮
Plug 'bronson/vim-trailing-whitespace'
" 不知道是什么插件
"Plug 'godlygeek/tabular'
" md语法
Plug 'plasticboy/vim-markdown'
Plug 'iamcco/mathjax-support-for-mkdp'
Plug 'iamcco/markdown-preview.vim'
call plug#end()

" vim-markdown关闭折叠
let g:vim_markdown_folding_disabled = 1
let g:instant_markdown_autostart = 0

"-------------------------------------------------------------------------
" 按键映射
"-------------------------------------------------------------------------
nmap <silent> <F9> <Plug>MarkdownPreview
imap <silent> <F9> <Plug>MarkdownPreview
nmap <silent> <F10> <Plug>StopMarkdownPreview
imap <silent> <F10> <Plug>StopMarkdownPreview
